{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1><i class="fas fa-edit"></i> {{ title }}</h1>
                <a href="{% url 'sales_monitoring:supervisor_dashboard' %}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-info-circle"></i> Instructions</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Bulk Update Activities</strong><br>
                        Select multiple activities below and apply bulk updates such as status changes or supervisor reviews. 
                        This is useful for reviewing multiple completed activities at once or updating status for similar activities.
                    </div>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-header">
                    <h5><i class="fas fa-tasks"></i> Select Activities to Update</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        {% crispy form %}
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add select all/none functionality
    const activitiesContainer = document.querySelector('#id_activities');
    if (activitiesContainer) {
        const selectAllBtn = document.createElement('button');
        selectAllBtn.type = 'button';
        selectAllBtn.className = 'btn btn-sm btn-outline-primary me-2 mb-3';
        selectAllBtn.innerHTML = '<i class="fas fa-check-square"></i> Select All';
        
        const selectNoneBtn = document.createElement('button');
        selectNoneBtn.type = 'button';
        selectNoneBtn.className = 'btn btn-sm btn-outline-secondary mb-3';
        selectNoneBtn.innerHTML = '<i class="fas fa-square"></i> Select None';
        
        activitiesContainer.parentNode.insertBefore(selectAllBtn, activitiesContainer);
        activitiesContainer.parentNode.insertBefore(selectNoneBtn, activitiesContainer);
        
        selectAllBtn.addEventListener('click', function() {
            const checkboxes = activitiesContainer.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = true);
        });
        
        selectNoneBtn.addEventListener('click', function() {
            const checkboxes = activitiesContainer.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
        });
    }
});
</script>
{% endblock %}
